{"ast":null,"code":"var request = require(\"request\"); //octokit } = require(\"@octokit/core\");\n\n\nclass Repository {\n  constructor(url, release_url, version, version_date, recent_update) {\n    this.url = url;\n    this.release_url = release_url;\n    this.version = version;\n    this.version_date = version_date;\n    this.recent_update = recent_update;\n  }\n\n}\n/* Given a repo name add it to our locally stored list\n * string: repo_name\n * example:\n * addWatchedRepo(\"lumanu/gh-release-monitor\")\n */\n\n\nfunction addWatchedRepo(repo_name) {\n  const uri = \"https://api.github.com/repos/\" + repo_name + \"/releases\";\n  request({\n    method: 'GET',\n    uri: uri,\n    headers: {\n      'user-agent': 'node.js'\n    }\n  }, function (err, res, body) {\n    if (err) {\n      console.error('error:', err);\n    }\n\n    ;\n\n    try {\n      let temp_repo_list = [];\n      let rel_url = JSON.parse(res.body)[0].html_url;\n      let ver = JSON.parse(res.body)[0].tag_name;\n      let ver_date = JSON.parse(res.body)[0].published_at;\n      let temp_repo = new Repository(repo_name, rel_url, ver, ver_date, false);\n      temp_repo_list = JSON.parse(localStorage.getItem('repo_list'));\n      temp_repo_list.push(temp_repo);\n      localStorage.setItem('repo_list', JSON.stringify(temp_repo_list));\n    } catch (err) {\n      console.log(\"addWatchedRepo error = \", err);\n    }\n  });\n}\n\nfunction removeWatchedRepo(repo_name) {\n  let temp_repo_list = JSON.parse(localStorage.getItem('repo_list'));\n  let cleaned_repo_list = [];\n\n  if (temp_repo_list == null) {\n    return;\n  } else {\n    for (let i = 0; i < temp_repo_list.length; i++) {\n      //console.log(i + \" \" + JSON.stringify(temp_repo_list[i].url));\n      if (repo_name == temp_repo_list[i].url) {\n        console.log(repo_name + \" = \" + JSON.stringify(temp_repo_list[i].url));\n      } else {\n        cleaned_repo_list.push(temp_repo_list[i]);\n      }\n    }\n\n    console.log(\"BEFORE CLEAN\", temp_repo_list);\n    console.log(\"AFTER CLEAN\", cleaned_repo_list);\n    localStorage.setItem('repo_list', JSON.stringify(cleaned_repo_list));\n  }\n} //addWatchedRepo(\"veg/hyphy\");\n//addWatchedRepo(\"veg/datamonkey-js\");\n//removeWatchedRepo(\"0\");\n// setter localStorage.setItem(key, data)\n// getter localStorage.getItem(key)\n// remove localStorage.removeItem(key)\n\n\nvar return_data = JSON.parse(localStorage.getItem('repo_list'));\nconsole.log(\"RETURN DATA = \", return_data);\n\nif (return_data == null) {\n  return_data = [new Repository(\"-\", \"-\", \"-\", \"-\", false)];\n}\n\nexport default return_data;","map":{"version":3,"sources":["/home/kevin/3repo-tracker/repo-tracker/src/jsonData.js"],"names":["request","require","Repository","constructor","url","release_url","version","version_date","recent_update","addWatchedRepo","repo_name","uri","method","headers","err","res","body","console","error","temp_repo_list","rel_url","JSON","parse","html_url","ver","tag_name","ver_date","published_at","temp_repo","localStorage","getItem","push","setItem","stringify","log","removeWatchedRepo","cleaned_repo_list","i","length","return_data"],"mappings":"AAAA,IAAIA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB,C,CACA;;;AAEA,MAAMC,UAAN,CAAiB;AACfC,EAAAA,WAAW,CAACC,GAAD,EAAMC,WAAN,EAAmBC,OAAnB,EAA4BC,YAA5B,EAA0CC,aAA1C,EAAwD;AACjE,SAAKJ,GAAL,GAAWA,GAAX;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACA,SAAKC,OAAL,GAAeA,OAAf;AACA,SAAKC,YAAL,GAAoBA,YAApB;AACA,SAAKC,aAAL,GAAqBA,aAArB;AACD;;AAPc;AAUjB;AACA;AACA;AACA;AACA;;;AACA,SAASC,cAAT,CAAwBC,SAAxB,EAAkC;AAChC,QAAMC,GAAG,GAAG,kCAAkCD,SAAlC,GAA8C,WAA1D;AACAV,EAAAA,OAAO,CACL;AACIY,IAAAA,MAAM,EAAE,KADZ;AAEID,IAAAA,GAAG,EAAEA,GAFT;AAGIE,IAAAA,OAAO,EAAE;AAAC,oBAAc;AAAf;AAHb,GADK,EAKF,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AACzB,QAAGF,GAAH,EAAO;AAACG,MAAAA,OAAO,CAACC,KAAR,CAAc,QAAd,EAAwBJ,GAAxB;AAA6B;;AAAA;;AACrC,QAAG;AACD,UAAIK,cAAc,GAAG,EAArB;AACA,UAAIC,OAAO,GAAUC,IAAI,CAACC,KAAL,CAAWP,GAAG,CAACC,IAAf,EAAqB,CAArB,EAAwBO,QAA7C;AACA,UAAIC,GAAG,GAAcH,IAAI,CAACC,KAAL,CAAWP,GAAG,CAACC,IAAf,EAAqB,CAArB,EAAwBS,QAA7C;AACA,UAAIC,QAAQ,GAASL,IAAI,CAACC,KAAL,CAAWP,GAAG,CAACC,IAAf,EAAqB,CAArB,EAAwBW,YAA7C;AACA,UAAIC,SAAS,GAAQ,IAAI1B,UAAJ,CAAeQ,SAAf,EAA0BU,OAA1B,EAAmCI,GAAnC,EAAwCE,QAAxC,EAAkD,KAAlD,CAArB;AACAP,MAAAA,cAAc,GAAGE,IAAI,CAACC,KAAL,CAAWO,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAX,CAAjB;AACAX,MAAAA,cAAc,CAACY,IAAf,CAAoBH,SAApB;AACAC,MAAAA,YAAY,CAACG,OAAb,CAAqB,WAArB,EAAkCX,IAAI,CAACY,SAAL,CAAed,cAAf,CAAlC;AACD,KATD,CASE,OAAML,GAAN,EAAU;AACRG,MAAAA,OAAO,CAACiB,GAAR,CAAY,yBAAZ,EAAuCpB,GAAvC;AACH;AAEN,GApBM,CAAP;AAqBD;;AAED,SAASqB,iBAAT,CAA2BzB,SAA3B,EAAqC;AACnC,MAAIS,cAAc,GAAGE,IAAI,CAACC,KAAL,CAAWO,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAX,CAArB;AACA,MAAIM,iBAAiB,GAAG,EAAxB;;AACA,MAAGjB,cAAc,IAAI,IAArB,EAA0B;AACxB;AACD,GAFD,MAEM;AACF,SAAI,IAAIkB,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGlB,cAAc,CAACmB,MAAlC,EAA0CD,CAAC,EAA3C,EAA8C;AAC5C;AACA,UAAG3B,SAAS,IAAIS,cAAc,CAACkB,CAAD,CAAd,CAAkBjC,GAAlC,EAAsC;AACpCa,QAAAA,OAAO,CAACiB,GAAR,CAAYxB,SAAS,GAAG,KAAZ,GAAoBW,IAAI,CAACY,SAAL,CAAed,cAAc,CAACkB,CAAD,CAAd,CAAkBjC,GAAjC,CAAhC;AACD,OAFD,MAEM;AACFgC,QAAAA,iBAAiB,CAACL,IAAlB,CAAuBZ,cAAc,CAACkB,CAAD,CAArC;AACH;AACF;;AACDpB,IAAAA,OAAO,CAACiB,GAAR,CAAY,cAAZ,EAA4Bf,cAA5B;AACAF,IAAAA,OAAO,CAACiB,GAAR,CAAY,aAAZ,EAA2BE,iBAA3B;AACAP,IAAAA,YAAY,CAACG,OAAb,CAAqB,WAArB,EAAkCX,IAAI,CAACY,SAAL,CAAeG,iBAAf,CAAlC;AACH;AACF,C,CAED;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAIG,WAAW,GAAGlB,IAAI,CAACC,KAAL,CAAWO,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAX,CAAlB;AACAb,OAAO,CAACiB,GAAR,CAAY,gBAAZ,EAA8BK,WAA9B;;AACA,IAAGA,WAAW,IAAI,IAAlB,EAAuB;AACrBA,EAAAA,WAAW,GAAG,CAAC,IAAIrC,UAAJ,CAAe,GAAf,EAAoB,GAApB,EAAyB,GAAzB,EAA8B,GAA9B,EAAmC,KAAnC,CAAD,CAAd;AACD;;AACD,eAAeqC,WAAf","sourcesContent":["var request = require(\"request\");\n//octokit } = require(\"@octokit/core\");\n\nclass Repository {\n  constructor(url, release_url, version, version_date, recent_update){\n    this.url = url;\n    this.release_url = release_url;\n    this.version = version;\n    this.version_date = version_date;\n    this.recent_update = recent_update;\n  }\n}\n\n/* Given a repo name add it to our locally stored list\n * string: repo_name\n * example:\n * addWatchedRepo(\"lumanu/gh-release-monitor\")\n */\nfunction addWatchedRepo(repo_name){\n  const uri = \"https://api.github.com/repos/\" + repo_name + \"/releases\";\n  request(\n    {\n        method: 'GET',\n        uri: uri,\n        headers: {'user-agent': 'node.js'}\n    }, function (err, res, body) {\n        if(err){console.error('error:', err)};\n        try{\n          let temp_repo_list = []\n          let rel_url        = JSON.parse(res.body)[0].html_url;\n          let ver            = JSON.parse(res.body)[0].tag_name;\n          let ver_date       = JSON.parse(res.body)[0].published_at;\n          let temp_repo      = new Repository(repo_name, rel_url, ver, ver_date, false);\n          temp_repo_list = JSON.parse(localStorage.getItem('repo_list'));\n          temp_repo_list.push(temp_repo);\n          localStorage.setItem('repo_list', JSON.stringify(temp_repo_list));\n        } catch(err){\n            console.log(\"addWatchedRepo error = \", err);\n        }\n\n  });\n}\n  \nfunction removeWatchedRepo(repo_name){\n  let temp_repo_list = JSON.parse(localStorage.getItem('repo_list'));\n  let cleaned_repo_list = []\n  if(temp_repo_list == null){\n    return;\n  } else{\n      for(let i = 0; i < temp_repo_list.length; i++){\n        //console.log(i + \" \" + JSON.stringify(temp_repo_list[i].url));\n        if(repo_name == temp_repo_list[i].url){\n          console.log(repo_name + \" = \" + JSON.stringify(temp_repo_list[i].url));\n        } else{\n            cleaned_repo_list.push(temp_repo_list[i])\n        }\n      }\n      console.log(\"BEFORE CLEAN\", temp_repo_list);\n      console.log(\"AFTER CLEAN\", cleaned_repo_list);\n      localStorage.setItem('repo_list', JSON.stringify(cleaned_repo_list));\n  }\n}\n\n//addWatchedRepo(\"veg/hyphy\");\n//addWatchedRepo(\"veg/datamonkey-js\");\n//removeWatchedRepo(\"0\");\n// setter localStorage.setItem(key, data)\n// getter localStorage.getItem(key)\n// remove localStorage.removeItem(key)\n\nvar return_data = JSON.parse(localStorage.getItem('repo_list'));\nconsole.log(\"RETURN DATA = \", return_data);\nif(return_data == null){\n  return_data = [new Repository(\"-\", \"-\", \"-\", \"-\", false)]\n}\nexport default return_data;\n\n\n"]},"metadata":{},"sourceType":"module"}